//###############################################################################
//# WbXbc - Manual - Bus Splitter                                               #
//###############################################################################
//#    Copyright 2018 Dirk Heisswolf                                            #
//#    This file is part of the WbXbc project.                                  #
//#                                                                             #
//#    WbXbc is free software: you can redistribute it and/or modify            #
//#    it under the terms of the GNU General Public License as published by     #
//#    the Free Software Foundation, either version 3 of the License, or        #
//#    (at your option) any later version.                                      #
//#                                                                             #
//#    WbXbc is distributed in the hope that it will be useful,                 #
//#    but WITHOUT ANY WARRANTY; without even the implied warranty of           #
//#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the            #
//#    GNU General Public License for more details.                             #
//#                                                                             #
//#    You should have received a copy of the GNU General Public License        #
//#    along with WbXbc.  If not, see <http://www.gnu.org/licenses/>.           #
//###############################################################################
//# Version History:                                                            #
//#   August 10, 2018                                                           #
//#      - Initial release                                                      #
//###############################################################################

== WbXbc Splitter

[ditaa, WbXbc_splitter, svg]
....
             +-------------------+             
             |                   +--->         
 Single      |                   |             
 Initiator   |      WbXbc        +---> Multiple
 Bus     --->|      Splitter     |     Target 
 with        |                   | ... Busses 
 Selects     |                   |             
             |                   +--->         
             +-------------------+             
....

This module implements a bus splitter for the pipelined Wishbone       
protocol. Accesses from the initiator bus are propagated to one of the 
target busses. The target busses are selected by a set of address tags,
generated by the address decoder.                                      

=== Integration Parameters
[cols="30,20,50",options="header"]
|=====================================================
|Parameter   |Default Value |Description
|TGT_CNT    >|4             |number of target busses
|ADDR_WIDTH >|16            |width of the address bus
|DATA_WIDTH >|16            |width of each data bus
|SEL_WIDTH  >|2             |number of data select lines
|TGA_WIDTH  >|1             |number of address tags
|TGC_WIDTH  >|1             |number of cycle tags
|TGRD_WIDTH >|1             |number of read data tags
|TGWD_WIDTH >|1             |number of write data tags
|=====================================================

Section <<parameters>> gives a detailed description of each parameter listed above.

=== Interface Signals
[cols="20,35,15,30v",options="header"]
|=====================================================
|Signal   |Range |Direction |Description
4+h|Clock and Reset
|clk_i             >|                         |input  |module clock	
|async_rst_i       >|                         |input  |asynchronous reset	
|sync_rst_i        >|                         |input  |synchronous reset  
4+h|Initiator Interface
|itr_cyc_i         >|                         |input  |bus cycle indicator
|itr_stb_i         >|                         |input  |access request
|itr_we_i          >|                         |input  |write enable
|itr_lock_i        >|                         |input  |uninterruptable bus cycle
|itr_sel_i         >|SEL_WIDTH-1:0            |input  |write data selects
|itr_adr_i         >|ADDR_WIDTH-1:0           |input  |address bus
|itr_dat_i         >|DATA_WIDTH-1:0           |input  |write data bus
|itr_tga_i         >|TGA_WIDTH-1:0            |input  |address tags
|itr_tga_tgtsel_i  >|TGT_CNT-1:0              |input  |target select tags
|itr_tgc_i         >|TGC_WIDTH-1:0            |input  |bus cycle tags
|itr_tgd_i         >|TGWD_WIDTH-1:0           |input  |write data tags
|itr_ack_o         >|                         |output |bus cycle acknowledge
|itr_err_o         >|                         |output |error indicator
|itr_rty_o         >|                         |output |retry request
|itr_stall_o       >|                         |output |access delay
|itr_dat_o         >|DATA_WIDTH-1:0           |output |read data bus
|itr_tgd_o         >|TGRD_WIDTH-1:0           |output |read data tags
4+h|Target Interfaces
|tgt_cyc_o         >|TGT_CNT-1:0              |output |concatinated bus cycle indicators
|tgt_stb_o         >|TGT_CNT-1:0              |output |concatinated access requests
|tgt_we_o          >|TGT_CNT-1:0              |output |concatinated write enables
|tgt_lock_o        >|TGT_CNT-1:0              |output |concatinated bus cycle locks
|tgt_sel_o         >|(TGT_CNT*SEL_WIDTH)-1:0  |output |concatinated write data selects
|tgt_adr_o         >|(TGT_CNT*ADDR_WIDTH)-1:0 |output |concatinated write data selects
|tgt_dat_o         >|(TGT_CNT*DATA_WIDTH)-1:0 |output |concatinated write data busses
|tgt_tga_o         >|(TGT_CNT*TGA_WIDTH)-1:0  |output |concatinated address tags
|tgt_tgc_o         >|(TGT_CNT*TGC_WIDTH)-1:0  |output |concatinated bus cycle tags
|tgt_tgd_o         >|(TGT_CNT*TGWD_WIDTH)-1:0 |output |concatinated write data tags
|tgt_ack_i         >|TGT_CNT-1:0              |input  |concatinated bus cycle acknowledges
|tgt_err_i         >|TGT_CNT-1:0              |input  |concatinated error indicators
|tgt_rty_i         >|TGT_CNT-1:0              |input  |concatinated retry requests
|tgt_stall_i       >|TGT_CNT-1:0              |input  |concatinated access delays
|tgt_dat_i         >|(TGT_CNT*DATA_WIDTH)-1:0 |input  |concatinated read data busses
|tgt_tgd_i         >|(TGT_CNT*TGRD_WIDTH)-1:0 |input  |concatinated read data tags
|=====================================================

Section <<signals>> gives a detailed description of each slignal listed above.

=== Verification Status
[cols="16v,>4,4*20v",options="header"]
|=====================================================
2+<|Configuration <|Linting <|Simulation <|Formal <|FPGA
//Default configuration
6+h|Default Configuration
|TGT_CNT    >|4
//Liniting
.8+^.^| iVerilog,
Yosys
//Simulation
.8+^.^|
//Formal
.8+^.^|
//FPGA
.8+^.^|          
|ADDR_WIDTH >|16            
|DATA_WIDTH >|16             
|SEL_WIDTH  >|2             
|TGA_WIDTH  >|1             
|TGC_WIDTH  >|1             
|TGRD_WIDTH >|1             
|TGWD_WIDTH >|1             
|=====================================================

All lint checks have been done with the Icarus Verilog simulator cite:[IVerilog]
and the Yosys synthesis tool cite:[Yosys].

